<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · TuringCallbacks.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://turinglang.github.io/TuringCallbacks.jl/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body>
<!-- NAVBAR START -->
<style>
    html {
        scroll-padding-top: calc(55px + 1rem);
    }

    /* Documenter css tweaks */
    .docs-sidebar {
        margin-top: 3.75rem;
    }

    #documenter {
        margin-top: 3.75rem;
    }

    .docs-version-selector {
        margin-bottom: 60px !important;
    }

    @media screen and (max-width: 1056px) {
        .docs-version-selector {
            margin-bottom: 60px !important;
        }

        .docs-sidebar {
            margin-top: 0 !important;
        }
    }
    /* Documenter css tweaks ends here */

    :root {
        --heading-color: white;
        --item-color: rgb(165, 165, 165);
        --primary-bg: #073c44;
        --hover-color: #8faad2;
    }

    .ext-navigation {
        position: fixed;
        height: 3.75rem;
        top: 0;
        width: 100%;
        background-color: var(--primary-bg);
        z-index: 1000;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        padding: 0 1.0625rem;
        transition: transform 0.3s;
    }

    .ext-navbar-logo {
        margin-left: 0.625rem;
    }

    .ext-nav-links {
        display: flex;
        align-items: center;
        list-style-type: none;
        margin: 0;
        padding: 0;
        flex-grow: 1;
    }

    .ext-nav-links li {
        margin-left: 1rem !important;
    }

    .ext-nav-link {
        color: white !important;
        text-decoration: none;
        font-size: 1.0625rem !important;
        transition: color 0.2s ease;
        cursor: pointer;
    }

    .ext-nav-link:hover,
    .ext-navbar-item-single a:hover {
        color: var(--hover-color) !important;
    }

    .ext-navbar-item-single a {
        color: #fff !important;
    }

    .ext-menu-toggle {
        display: none;
        font-size: 1.5rem;
        color: white;
        cursor: pointer;
    }

    .ext-dropdown {
        display: none;
        grid-template-columns: 1fr 1fr 1fr 1fr;
        grid-template-rows: auto auto auto;
        padding: 1.875rem;
        position: absolute;
        width: 100%;
        left: 0;
        background-color: #083c44;
        line-height: 1.875rem;
        opacity: 0;
        transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        transform: translateY(-0.625rem);
    }

    #library-handler::after {
        content: "▼";
        font-size: 0.6875rem;
        margin-left: 0.3125rem;
        transition: transform 0.3s ease-in-out;
    }

    #library-handler.open::after {
        content: "▲";
    }

    .ext-dropdown.show {
        display: grid;
        opacity: 1;
        transform: translateY(0);
    }

    .ext-dropdown ul {
        height: auto;
        width: 12.5rem;
        margin-bottom: 1.25rem;
    }

    .ext-dropdown ul li {
        text-align: left;
    }

    .navbar-sub-item {
        list-style: none;
    }

    .ext-dropdown ul a li {
        color: var(--item-color);
        width: 15.625rem;
        border-radius: 3px;
        padding: 0.125rem 0.625rem;
        transition: background-color 0.2s ease;
    }

    .ext-dropdown ul a li:hover {
        background-color: rgba(107, 107, 107, 0.5);
    }

    .ext-dropdown-item-heading {
        color: var(--heading-color);
        text-align: center;
    }

    /* Responsive styling */
    @media (max-width: 966px) {
        .ext-dropdown {
            grid-template-columns: 1fr 1fr 1fr;
        }
    }

    @media (max-width: 768px) {
        .ext-nav-links {
            display: none;
            flex-direction: column;
            width: 100%;
            background-color: var(--primary-bg);
            position: absolute;
            top: 3.75rem;
            left: 0;
            padding: 0.625rem 0;
            height: auto;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgb(141, 141, 141) grey;
        }

        .ext-nav-links.show {
            display: flex;
        }

        .ext-nav-links li {
            margin: 0.625rem 0;
            text-align: center;
        }

        .ext-menu-toggle {
            display: block;
            margin-left: auto;
        }

        .ext-navigation.hide {
            transform: translateY(-3.75rem);
        }

        .ext-dropdown {
            place-content: center;
            text-align: center;
            grid-template-columns: 1fr;
            line-height: 1.25rem;
            padding: 0.625rem;
        }

        .ext-dropdown ul {
            width: 100%;
            text-align: center;
            margin-bottom: 0.3125rem;
        }

        .ext-dropdown ul li {
            text-align: center;
        }

        .ext-dropdown ul a li {
            width: 100%;
        }

        .ext-dropdown ul a li:hover {
            background-color: var(--primary-bg);
            color: #fff;
        }

        /* Modified scroll bar */
        .ext-nav-links::-webkit-scrollbar {
            width: 5px;
        }

        .ext-nav-links::-webkit-scrollbar-track {
            box-shadow: inset 0 0 5px grey;
        }

        .ext-nav-links::-webkit-scrollbar-thumb {
            background: rgb(141, 141, 141);
            border-radius: 3px;
        }

        .ext-nav-links::-webkit-scrollbar-thumb:hover {
            background: #9b9b9b;
        }
    }
</style>
<nav class="ext-navigation">
    <a href="https://turinglang.org/">
        <img src="https://turinglang.org/assets/images/turing-logo.svg" alt="Turing Logo" class="ext-navbar-logo" height="24px" width="40px">
    </a>
    <a style="color: white !important; font-size: 21.25px !important; margin-left: 10px;" href="https://turinglang.org/">Turing.jl</a>
    <ul class="ext-nav-links">
        <li>
            <a class="ext-nav-link" href="https://turinglang.org/docs/tutorials/docs-00-getting-started/">Get Started</a>
        </li>
        <li>
            <a class="ext-nav-link" href="https://turinglang.org/docs/tutorials/00-introduction/">Tutorials</a>
        </li>
        <li>
            <p class="ext-nav-link" id="library-handler">Library API</p>
            <div class="ext-dropdown" id="ext-dropdown-items">
                <ul>
                    <li class="ext-dropdown-item-heading">Modellinglanguages</li>
                    <a href="https://turinglang.org/DynamicPPL.jl/">
                        <li>DynamicPPL</li>
                    </a>
                    <a href="https://turinglang.org/JuliaBUGS.jl/">
                        <li>JuliaBUGS</li>
                    </a>
                    <a href="https://turinglang.org/TuringGLM.jl/">
                        <li>TurineGLM</li>
                    </a>
                </ul>
                <ul>
                    <li class="ext-dropdown-item-heading">MCMC</li>
                    <a href="https://turinglang.org/AdvancedHMC.jl/">
                        <li>AdvancedHMC</li>
                    </a>
                    <a href="https://turinglang.org/AbstractMCMC.jl/">
                        <li>AbstractMCMC</li>
                    </a>
                    <a href="https://github.com/theogf/ThermodynamicIntegration.jl">
                        <li>ThermodynamicIntegration</li>
                    </a>
                    <a href="https://turinglang.org/AdvancedPS.jl/">
                        <li>AdvancedPS</li>
                    </a>
                    <a href="https://turinglang.org/EllipticalSliceSampling.jl/">
                        <li>EllipticalSliceSampling</li>
                    </a>
                    <a href="https://turinglang.org/NestedSamplers.jl/">
                        <li>NestedSamplers</li>
                    </a>
                </ul>
                <ul>
                    <li class="ext-dropdown-item-heading">Diagnostics</li>
                    <a href="https://turinglang.org/MCMCChains.jl/">
                        <li>MCMCChains</li>
                    </a>
                    <a href="https://turinglang.org/MCMCDiagnosticTools.jl/">
                        <li>MCMCDiagnosticTools</li>
                    </a>
                    <a href="https://turinglang.org/ParetoSmooth.jl/">
                        <li>ParetoSmooth</li>
                    </a>
                </ul>
                <ul>
                    <li class="ext-dropdown-item-heading">Gaussion Processes</li>
                    <a href="https://juliagaussianprocesses.github.io/AbstractGPs.jl/">
                        <li>AbstractGPs</li>
                    </a>
                    <a href="https://juliagaussianprocesses.github.io/KernelFunctions.jl/">
                        <li>KernelFunctions</li>
                    </a>
                    <a href="https://juliagaussianprocesses.github.io/ApproximateGPs.jl/">
                        <li>ApproximateGPs</li>
                    </a>
                </ul>
                <ul>
                    <li class="ext-dropdown-item-heading ext-navbar-item-single">
                        <a href="https://turinglang.org/Bijectors.jl/">Bijectors</a>
                    </li>
                </ul>
                <ul>
                    <li class="ext-dropdown-item-heading ext-navbar-item-single">
                        <a href="https://turinglang.org/TuringCallbacks.jl/">TuringCallbacks</a>
                    </li>
                </ul>
                <ul>
                    <li class="ext-dropdown-item-heading ext-navbar-item-single">
                        <a href="https://turinglang.org/TuringBenchmarking.jl/">TuringBenchmarking</a>
                    </li>
                </ul>
            </div>
        </li>
        <li>
            <a class="ext-nav-link" href="https://turinglang.org/news/">News</a>
        </li>
        <li>
            <a class="ext-nav-link" href="https://turinglang.org/team/">Team</a>
        </li>
    </ul>
    <a href="https://x.com/TuringLang" style="margin-left: 15px; padding-top: 2px">
        <svg fill="#ffffff" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32px" height="32px" viewBox="-209.92 -209.92 931.84 931.84" xml:space="preserve" stroke="#ffffff">
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
            <g id="SVGRepo_iconCarrier">
                <g id="7935ec95c421cee6d86eb22ecd12f847">
                    <path style="display: inline"
                        d="M459.186,151.787c0.203,4.501,0.305,9.023,0.305,13.565 c0,138.542-105.461,298.285-298.274,298.285c-59.209,0-114.322-17.357-160.716-47.104c8.212,0.973,16.546,1.47,25.012,1.47 c49.121,0,94.318-16.759,130.209-44.884c-45.887-0.841-84.596-31.154-97.938-72.804c6.408,1.227,12.968,1.886,19.73,1.886 c9.55,0,18.816-1.287,27.617-3.68c-47.955-9.633-84.1-52.001-84.1-102.795c0-0.446,0-0.882,0.011-1.318 c14.133,7.847,30.294,12.562,47.488,13.109c-28.134-18.796-46.637-50.885-46.637-87.262c0-19.212,5.16-37.218,14.193-52.7 c51.707,63.426,128.941,105.156,216.072,109.536c-1.784-7.675-2.718-15.674-2.718-23.896c0-57.891,46.941-104.832,104.832-104.832 c30.173,0,57.404,12.734,76.525,33.102c23.887-4.694,46.313-13.423,66.569-25.438c-7.827,24.485-24.434,45.025-46.089,58.002 c21.209-2.535,41.426-8.171,60.222-16.505C497.448,118.542,479.666,137.004,459.186,151.787z">
                    </path>
                </g>
            </g>
        </svg>
    </a>
    <a href="https://github.com/TuringLang/Turing.jl">
        <svg width="32px" height="32px" viewBox="-8.2 -8.2 36.40 36.40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000">
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
            <g id="SVGRepo_iconCarrier">
                <title>github [#142]</title>
                <desc>Created with Sketch.</desc>
                <defs></defs>
                <g id="Page-1" stroke-width="0.0002" fill="none" fill-rule="evenodd">
                    <g id="Dribbble-Light-Preview" transform="translate(-140.000000, -7559.000000)" fill="#ffffff">
                        <g id="icons" transform="translate(56.000000, 160.000000)">
                            <path
                                d="M94,7399 C99.523,7399 104,7403.59 104,7409.253 C104,7413.782 101.138,7417.624 97.167,7418.981 C96.66,7419.082 96.48,7418.762 96.48,7418.489 C96.48,7418.151 96.492,7417.047 96.492,7415.675 C96.492,7414.719 96.172,7414.095 95.813,7413.777 C98.04,7413.523 100.38,7412.656 100.38,7408.718 C100.38,7407.598 99.992,7406.684 99.35,7405.966 C99.454,7405.707 99.797,7404.664 99.252,7403.252 C99.252,7403.252 98.414,7402.977 96.505,7404.303 C95.706,7404.076 94.85,7403.962 94,7403.958 C93.15,7403.962 92.295,7404.076 91.497,7404.303 C89.586,7402.977 88.746,7403.252 88.746,7403.252 C88.203,7404.664 88.546,7405.707 88.649,7405.966 C88.01,7406.684 87.619,7407.598 87.619,7408.718 C87.619,7412.646 89.954,7413.526 92.175,7413.785 C91.889,7414.041 91.63,7414.493 91.54,7415.156 C90.97,7415.418 89.522,7415.871 88.63,7414.304 C88.63,7414.304 88.101,7413.319 87.097,7413.247 C87.097,7413.247 86.122,7413.234 87.029,7413.87 C87.029,7413.87 87.684,7414.185 88.139,7415.37 C88.139,7415.37 88.726,7417.2 91.508,7416.58 C91.513,7417.437 91.522,7418.245 91.522,7418.489 C91.522,7418.76 91.338,7419.077 90.839,7418.982 C86.865,7417.627 84,7413.783 84,7409.253 C84,7403.59 88.478,7399 94,7399"
                                id="github-[#142]">
                            </path>
                        </g>
                    </g>
                </g>
            </g>
        </svg>
    </a>
    <span class="ext-menu-toggle">&#9776;</span>
</nav>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const menuToggle = document.querySelector(".ext-menu-toggle");
        const navLinks = document.querySelector(".ext-nav-links");
        const nav = document.querySelector(".ext-navigation");
        const navigationHandler = document.getElementById("library-handler");
        const navigationItemsContainer =
            document.getElementById("ext-dropdown-items");
        let lastScrollY = window.scrollY;

        function setAppropriateHeight() {
            if (window.innerWidth <= 768) {
                const viewportHeight = window.innerHeight;
                const navHeight = nav.offsetHeight;
                navLinks.style.maxHeight = `${viewportHeight - navHeight}px`;
                navLinks.style.overflowY = "auto";
            } else {
                navLinks.style.maxHeight = "";
                navLinks.style.overflowY = "";
            }
        }

        // Toggle main menu for mobile
        menuToggle.addEventListener("click", () => {
            navLinks.classList.toggle("show");
            if (navLinks.classList.contains("show")) {
                setAppropriateHeight();
                // Ensure the dropdown is hidden when menu is first opened
                navigationItemsContainer.style.display = "none";
                navigationItemsContainer.classList.remove("show");
            }
        });

        // Close menus if clicked outside
        document.addEventListener("click", (event) => {
            if (
                !navLinks.contains(event.target) &&
                !menuToggle.contains(event.target)
            ) {
                navLinks.classList.remove("show");
                navigationItemsContainer.classList.remove("show");
                navigationHandler.classList.remove("open");
            }
        });

        // Hide navigation bar on scroll down in mobile view
        window.addEventListener("scroll", () => {
            if (window.innerWidth <= 768) {
                nav.classList.toggle("hide", window.scrollY > lastScrollY);
                lastScrollY = window.scrollY;
            }
        });

        // Library API script
        navigationHandler.addEventListener("click", (event) => {
            event.preventDefault(); // Prevent default action of the link
            if (navigationItemsContainer.classList.contains("show")) {
                navigationItemsContainer.classList.remove("show");
                navigationHandler.classList.remove("open");
                setTimeout(() => {
                    navigationItemsContainer.style.display = "none";
                }, 500); // Match the timeout to the CSS transition duration
            } else {
                navigationItemsContainer.style.display = "grid";
                navigationHandler.classList.add("open");
                setTimeout(() => {
                    navigationItemsContainer.classList.add("show");
                }, 10); // Delay to ensure the display change takes effect before adding class
            }
            setAppropriateHeight(); // Recalculate height when dropdown changes
        });

        // Handle window resize
        window.addEventListener("resize", setAppropriateHeight);

        // Initial setup
        setAppropriateHeight();
    });
</script>
<!-- NAVBAR END -->
<div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>TuringCallbacks.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Getting-started"><span>Getting started</span></a></li><li><a class="tocitem" href="#Visualizing-sampling-on-the-fly"><span>Visualizing sampling on-the-fly</span></a></li><li><a class="tocitem" href="#Types-and-Functions"><span>Types &amp; Functions</span></a></li><li><a class="tocitem" href="#Internals"><span>Internals</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/TuringLang/TuringCallbacks.jl/blob/master/docs/src/index.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="TuringCallbacks"><a class="docs-heading-anchor" href="#TuringCallbacks">TuringCallbacks</a><a id="TuringCallbacks-1"></a><a class="docs-heading-anchor-permalink" href="#TuringCallbacks" title="Permalink"></a></h1><ul><li><a href="#TuringCallbacks">TuringCallbacks</a></li><li class="no-marker"><ul><li><a href="#Getting-started">Getting started</a></li><li><a href="#Visualizing-sampling-on-the-fly">Visualizing sampling on-the-fly</a></li><li><a href="#Types-and-Functions">Types &amp; Functions</a></li><li><a href="#Internals">Internals</a></li><li><a href="#Index">Index</a></li></ul></li></ul><h2 id="Getting-started"><a class="docs-heading-anchor" href="#Getting-started">Getting started</a><a id="Getting-started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-started" title="Permalink"></a></h2><p>As the package is not yet officially released, the package has to be added from the GitHub repository:</p><pre><code class="language-julia hljs">julia&gt; ]
pkg&gt; add TuringCallbacks.jl</code></pre><h2 id="Visualizing-sampling-on-the-fly"><a class="docs-heading-anchor" href="#Visualizing-sampling-on-the-fly">Visualizing sampling on-the-fly</a><a id="Visualizing-sampling-on-the-fly-1"></a><a class="docs-heading-anchor-permalink" href="#Visualizing-sampling-on-the-fly" title="Permalink"></a></h2><p><code>TensorBoardCallback</code> is a wrapper around <code>TensorBoardLogger.TBLogger</code> which can be used to create a <code>callback</code> compatible with <code>Turing.sample</code>.</p><p>To actually visualize the results of the logging, you need to have installed <code>tensorboard</code> in Python. If you do not have <code>tensorboard</code> installed, it should hopefully be sufficient to just run</p><pre><code class="language-sh hljs">pip3 install tensorboard</code></pre><p>Then you can start up the <code>TensorBoard</code>:</p><pre><code class="language-sh hljs">python3 -m tensorboard.main --logdir tensorboard_logs/run</code></pre><p>Now we&#39;re ready to actually write some Julia code.</p><p>The following snippet demonstrates the usage of <code>TensorBoardCallback</code> on a simple model.  This will write a set of statistics at each iteration to an event-file compatible with Tensorboard:</p><pre><code class="language-julia hljs">using Turing, TuringCallbacks

@model function demo(x)
    s ~ InverseGamma(2, 3)
    m ~ Normal(0, √s)
    for i in eachindex(x)
        x[i] ~ Normal(m, √s)
    end
end

xs = randn(100) .+ 1;
model = demo(xs);

# Number of MCMC samples/steps
num_samples = 10_000
num_adapts = 100

# Sampling algorithm to use
alg = NUTS(num_adapts, 0.65)

# Create the callback
callback = TensorBoardCallback(&quot;tensorboard_logs/run&quot;)

# Sample
chain = sample(model, alg, num_samples; callback = callback)</code></pre><p>While this is sampling, you can head right over to <code>localhost:6006</code> in your web browser and you should be seeing some plots!</p><p><img src="assets/tensorboard_demo_initial_screen.png" alt="TensorBoard dashboard"/></p><p>In particular, note the &quot;Distributions&quot; tab in the above picture. Clicking this, you should see something similar to:</p><p><img src="assets/tensorboard_demo_distributions_screen.png" alt="TensorBoard dashboard"/></p><p>And finally, the &quot;Histogram&quot; tab shows a slighly more visually pleasing version of the marginal distributions:</p><p><img src="assets/tensorboard_demo_histograms_screen.png" alt="TensorBoard dashboard"/></p><p>Note that the names of the stats following a naming <code>$variable_name/...</code> where <code>$variable_name</code> refers to name of the variable in the model.</p><h3 id="Choosing-what-and-how-you-log"><a class="docs-heading-anchor" href="#Choosing-what-and-how-you-log">Choosing what and how you log</a><a id="Choosing-what-and-how-you-log-1"></a><a class="docs-heading-anchor-permalink" href="#Choosing-what-and-how-you-log" title="Permalink"></a></h3><h4 id="Statistics"><a class="docs-heading-anchor" href="#Statistics">Statistics</a><a id="Statistics-1"></a><a class="docs-heading-anchor-permalink" href="#Statistics" title="Permalink"></a></h4><p>In the above example we didn&#39;t provide any statistics explicit and so it used the default statistics, e.g. <code>Mean</code> and <code>Variance</code>. But using other statistics is easy! Here&#39;s a much more interesting example:</p><pre><code class="language-julia hljs"># Create the stats (estimators are sub-types of `OnlineStats.OnlineStat`)
stats = Skip(
    num_adapts, # Consider adaptation steps
    Series(
        # Estimators using the entire chain
        Series(Mean(), Variance(), AutoCov(10), KHist(100)),
        # Estimators using the entire chain but only every 10-th sample
        Thin(10, Series(Mean(), Variance(), AutoCov(10), KHist(100))),
        # Estimators using only the last 1000 samples
        WindowStat(1000, Series(Mean(), Variance(), AutoCov(10), KHist(100)))
    )
)
# Create the callback
callback = TensorBoardCallback(&quot;tensorboard_logs/run&quot;, stats)

# Sample
chain = sample(model, alg, num_samples; callback = callback)</code></pre><p>Tada! Now you should be seeing waaaay more interesting statistics in your TensorBoard dashboard. See the <a href="https://joshday.github.io/OnlineStats.jl/latest/"><code>OnlineStats.jl</code> documentation</a> for more on the different statistics, with the exception of <a href="#TuringCallbacks.Thin"><code>Thin</code></a>, <a href="#TuringCallbacks.Skip"><code>Skip</code></a> and <a href="#TuringCallbacks.WindowStat"><code>WindowStat</code></a> which are implemented in this package.</p><p>Note that these statistic estimators are stateful, and therefore the following is <em>bad</em>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; s = AutoCov(5)</code><code class="nohighlight hljs ansi" style="display:block;">AutoCov: n=0 | value=[NaN, NaN, NaN, NaN, NaN, NaN]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; stat = Series(s, s)</code><code class="nohighlight hljs ansi" style="display:block;">Series
├─ AutoCov: n=0 | value=[NaN, NaN, NaN, NaN, NaN, NaN]
└─ AutoCov: n=0 | value=[NaN, NaN, NaN, NaN, NaN, NaN]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; # =&gt; 10 samples but `n=20` since we&#39;ve called `fit!` twice for each observation
       fit!(stat, randn(10))</code><code class="nohighlight hljs ansi" style="display:block;">Series
├─ AutoCov: n=20 | value=[0.912205, 0.260832, -0.390541, -0.132463, 0.125615, 0.0644281]
└─ AutoCov: n=20 | value=[0.912205, 0.260832, -0.390541, -0.132463, 0.125615, 0.0644281]</code></pre><p>while the following is <em>good</em>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; stat = Series(AutoCov(5), AutoCov(5))</code><code class="nohighlight hljs ansi" style="display:block;">Series
├─ AutoCov: n=0 | value=[NaN, NaN, NaN, NaN, NaN, NaN]
└─ AutoCov: n=0 | value=[NaN, NaN, NaN, NaN, NaN, NaN]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; # =&gt; 10 samples AND `n=10`; great!
       fit!(stat, randn(10))</code><code class="nohighlight hljs ansi" style="display:block;">Series
├─ AutoCov: n=10 | value=[1.25101, -0.242006, -0.487156, 0.115114, 0.102494, -0.28756]
└─ AutoCov: n=10 | value=[1.25101, -0.242006, -0.487156, 0.115114, 0.102494, -0.28756]</code></pre><p>Since at the moment the only support statistics are sub-types of <code>OnlineStats.OnlineStat</code>. If you want to log some custom statistic, again, at the moment, you have to make a sub-type and implement <code>OnlineStats.fit!</code> and <code>OnlineStats.value</code>. By default, a <code>OnlineStat</code> is passed to <code>tensorboard</code> by simply calling <code>OnlineStat.value(stat)</code>. Therefore, if you also want to customize how a stat is passed to <code>tensorbord</code>, you need to overload <code>TensorBoardLogger.preprocess(name, stat, data)</code> accordingly.</p><h4 id="Filter-variables-to-log"><a class="docs-heading-anchor" href="#Filter-variables-to-log">Filter variables to log</a><a id="Filter-variables-to-log-1"></a><a class="docs-heading-anchor-permalink" href="#Filter-variables-to-log" title="Permalink"></a></h4><p>Maybe you want to only log stats for certain variables, e.g. in the above example we might want to exclude <code>m</code> <em>and</em> exclude the sampler statistics:</p><pre><code class="language-julia hljs">callback = TensorBoardCallback(
    &quot;tensorboard_logs/run&quot;, stats;
    exclude = [&quot;m&quot;, ], include_extras = false
)</code></pre><p>Or you can create the filter (a mapping <code>variable_name -&gt; ::Bool</code> yourself:</p><pre><code class="language-julia hljs">var_filter(varname) = varname != &quot;m&quot;
callback = TensorBoardCallback(
    &quot;tensorboard_logs/run&quot;, stats;
    variable_filter = var_filter
)</code></pre><h2 id="Types-and-Functions"><a class="docs-heading-anchor" href="#Types-and-Functions">Types &amp; Functions</a><a id="Types-and-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Types-and-Functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="TuringCallbacks.Skip" href="#TuringCallbacks.Skip"><code>TuringCallbacks.Skip</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct Skip{T, O&lt;:OnlineStat{T}} &lt;: OnlineStat{T}</code></pre><p><strong>Usage</strong></p><pre><code class="nohighlight hljs">Skip(b::Int, stat::OnlineStat)</code></pre><p>Skips the first <code>b</code> observations before passing them on to <code>stat</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/TuringCallbacks.jl/blob/ecffca17bb6879662adcb4e3c34a7fa54d9ea1ce/src/stats.jl#LL4">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TuringCallbacks.TensorBoardCallback" href="#TuringCallbacks.TensorBoardCallback"><code>TuringCallbacks.TensorBoardCallback</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct TensorBoardCallback{F, L}</code></pre><p>Wraps a <code>TensorBoardLogger.TBLogger</code> to construct a callback to be passed to <code>Turing.sample</code>.</p><p><strong>Usage</strong></p><pre><code class="nohighlight hljs">TensorBoardCallback(; kwargs...)
TensorBoardCallback(directory::string[, stats]; kwargs...)
TensorBoardCallback(lg::TBLogger[, stats]; kwargs...)</code></pre><p>Constructs an instance of a <code>TensorBoardCallback</code>, creating a <code>TBLogger</code> if <code>directory</code> is  provided instead of <code>lg</code>.</p><p><strong>Arguments</strong></p><ul><li><code>stats = nothing</code>: <code>OnlineStat</code> or lookup for variable name to statistic estimator. If <code>stats isa OnlineStat</code>, we will create a <code>DefaultDict</code> which copies <code>stats</code> for unseen variable names. If <code>isnothing</code>, then a <code>DefaultDict</code> with a default constructor returning a <code>OnlineStats.Series</code> estimator with <code>Mean()</code>, <code>Variance()</code>, and <code>KHist(num_bins)</code> will be used.</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>num_bins::Int = 100</code>: Number of bins to use in the histograms.</li><li><code>variable_filter = nothing</code>: Filter determining whether or not we should log stats for a  particular variable.  If <code>isnothing</code> a default-filter constructed from <code>exclude</code> and  <code>include</code> will be used.</li><li><code>exclude = String[]</code>: If non-empty, these variables will not be logged.</li><li><code>include = String[]</code>: If non-empty, only these variables will be logged.</li><li><code>include_extras::Bool = true</code>: Include extra statistics from transitions.</li><li><code>directory::String = nothing</code>: if specified, will together with <code>comment</code> be used to  define the logging directory.</li><li><code>comment::String = nothing</code>: if specified, will together with <code>directory</code> be used to  define the logging directory.</li></ul><p><strong>Fields</strong></p><ul><li><p><code>logger::TensorBoardLogger.TBLogger</code></p><p>Underlying logger.</p></li><li><p><code>variable_filter::Any</code></p><p>Filter determining whether or not we should log stats for a particular variable.</p></li><li><p><code>include_extras::Bool</code></p><p>Include extra statistics from transitions.</p></li><li><p><code>stats::Any</code></p><p>Lookup for variable name to statistic estimate.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/TuringCallbacks.jl/blob/ecffca17bb6879662adcb4e3c34a7fa54d9ea1ce/src/callbacks/tensorboard.jl#LL3-L42">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TuringCallbacks.Thin" href="#TuringCallbacks.Thin"><code>TuringCallbacks.Thin</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct Thin{T, O&lt;:OnlineStat{T}} &lt;: OnlineStat{T}</code></pre><p><strong>Usage</strong></p><pre><code class="nohighlight hljs">Thin(b::Int, stat::OnlineStat)</code></pre><p>Thins <code>stat</code> with an interval <code>b</code>, i.e. only passes every b-th observation to <code>stat</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/TuringCallbacks.jl/blob/ecffca17bb6879662adcb4e3c34a7fa54d9ea1ce/src/stats.jl#LL37">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TuringCallbacks.WindowStat" href="#TuringCallbacks.WindowStat"><code>TuringCallbacks.WindowStat</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct WindowStat{T, O} &lt;: OnlineStat{T}</code></pre><p><strong>Usage</strong></p><pre><code class="nohighlight hljs">WindowStat(b::Int, stat::O) where {O &lt;: OnlineStat}</code></pre><p>&quot;Wraps&quot; <code>stat</code> in a <code>MovingWindow</code> of length <code>b</code>.</p><p><code>value(o::WindowStat)</code> will then return an <code>OnlineStat</code> of the same type as  <code>stat</code>, which is <em>only</em> fitted on the batched data contained in the <code>MovingWindow</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/TuringCallbacks.jl/blob/ecffca17bb6879662adcb4e3c34a7fa54d9ea1ce/src/stats.jl#LL70">source</a></section></article><h2 id="Internals"><a class="docs-heading-anchor" href="#Internals">Internals</a><a id="Internals-1"></a><a class="docs-heading-anchor-permalink" href="#Internals" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="TuringCallbacks.tb_name-Tuple{Any}" href="#TuringCallbacks.tb_name-Tuple{Any}"><code>TuringCallbacks.tb_name</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">tb_name(args...)</code></pre><p>Returns a <code>string</code> representing the name for <code>arg</code> or <code>args</code> in TensorBoard.</p><p>If <code>length(args) &gt; 1</code>, <code>args</code> are joined together by <code>&quot;/&quot;</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TuringLang/TuringCallbacks.jl/blob/ecffca17bb6879662adcb4e3c34a7fa54d9ea1ce/src/tensorboardlogger.jl#LL5-L11">source</a></section></article><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#TuringCallbacks.Skip"><code>TuringCallbacks.Skip</code></a></li><li><a href="#TuringCallbacks.TensorBoardCallback"><code>TuringCallbacks.TensorBoardCallback</code></a></li><li><a href="#TuringCallbacks.Thin"><code>TuringCallbacks.Thin</code></a></li><li><a href="#TuringCallbacks.WindowStat"><code>TuringCallbacks.WindowStat</code></a></li><li><a href="#TuringCallbacks.tb_name-Tuple{Any}"><code>TuringCallbacks.tb_name</code></a></li></ul></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.19 on <span class="colophon-date" title="Monday 13 June 2022 00:37">Monday 13 June 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>

